continue
result[:total_sites]
exit
result[:total_sites]
result[:last_seen]
result[:last_activity][:districts].any?
result[:last_activity]
result[:last_activity
continue
html
exit
sites.count
sorted_districts
  sorted_districts 
exit
Rails.application.routes.default_url_options[:host]
host
continue
html
continue
 @admin_list
  @mailing_list
continue
@last_seen_data
exit
@last_seen_data
last_seen_data
continue
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
 LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now 
exit
result[:last_seen][:districts][2]
result[:last_seen][:districts][0]
result[:last_activity][:districts][0]
result[:last_seen][:districts][0]
exit
result[:last_seen][:districts][0]
result[:last_seen][:districts]
LastSeenMailer.summary_of_last_seen(result[:last_seen][:districts]).deliver_now
result[:last_seen][:total_sites_with_issue]
result[:last_seen][:total_last_seen_sites]
result[:last_seen][:districts]
result[:last_seen]
exit
ApplicationController.render(  template: 'mailing_lists/index',  assigns: { district_data: @district_data })
ApplicationController.render(  template: 'last_seen_mailer/report',  assigns: { district_data: @district_data })
html
exit
html_content
exit
 html_content
exit
renderer.render( template: 'last_seen_mailer/report', locals: { district_data: @district_data })
renderer = ApplicationController.renderer.new(
  http_host: 'example.org',
  https: Rails.env.production?
)
Rails.env.production?
request.host
ApplicationController.renderer.render( template: 'last_seen_mailer/report', locals: { district_data: @district_data })
exit
ApplicationController.renderer.render( partial: 'last_seen_mailer/last_seen_more_than_3_days.html', locals: { district_data: @district_data })
ApplicationController.renderer.render( partial: "last_seen_mailer/report.html")
ApplicationController.renderer.render( partial: "last_seen_mailer/report")
ApplicationController.renderer.render( partial: 'last_seen_mailer/report')
ApplicationController.renderer.render( partial: 'last_seen_mailer/report', locals: { district_data: @district_data })
 ApplicationController.renderer.render( partial: 'last_seen_mailer/report', locals: { district_data: @district_data }
 html_content
exit
"#{Rails.root}/app/views/last_seen_mailer/report"
#{Rails.root}/app/views/last_seen_mailer/report
 html_content
exit
 html_content
exit
sites
    grouped_sites
continue
continue 
exit
 @district_data
@mailing_list
@admin_list
exit
last_seen_grouped.values
last_activity_grouped.values
exit
grouped_sites.first
exit
grouped_sites.first
exit
grouped_sites.first
exit
grouped_sites.first
grouped_sites[0]
grouped_sites
exit
site
grouped_sites
exit
 ActiveRecord::Base.connection.active?
ActiveRecord::Base.connected?
exit
ActiveRecord::Base.connected? && ActiveRecord::Base.connection.active?
exit
district_data
continue
district_data
continue
district_data
continue
district_data
continue
district_data
exit
sites
exit
LastSyncedMailer.last_synced_more_than_3_days(district_data).deliver_now
exit
LastSyncedMailer.last_synced_more_than_3_days(district_data).deliver_now
LastSyncedMailer.last_synced_more_than_3_days(district_data).deliver_later
exit
site["site_name"]
site[:site_name]
site
exit
continue
@district_data[:sites][:sites_last_seen_greater_than_3_days]
exit
continue
exit
@district_data[:sites][:sites_last_seen_greater_than_3_days]
@district_data[:sites]
@district_data[:sites]["0"] 
@district_data[:sites][0] 
@district_data[:sites].each 
@district_data[:sites].first.[:site_name]
@district_data[:sites][0][:site_name]
@district_data[:sites][:site_name]
@district_data[:sites][0][:site_name]
@district_data[:sites]
@district_data
district_data
@district_data
district_data
continue
district_data
exit
district_data
exit
@sites 
sites 
sites
@sites
@sites = district_data[:sites] 
district_data[:sites]
sdss
district_data[:sites]
sites
sites = district_data[:sites] 
@sites = district_data[:sites] 
@sites = district_data[:sites]
@sites
@sites = district_data[:sites]
district_data[:sites]
exit
district_data[:sites][:sites_last_activity_greater_than_3_days]
district_data[:sites][:sites_last_seen_greater_than_3_days]
district_data[:sites][:sites_last_seen_greater_than_3_days].any?
exit
   LastSyncedMailer.last_synced_more_than_3_days(district_data).deliver_later
exit
district_data[:sites]
district_data
district_data[0]
district_data
exit
district_data
exit
 grouped_sites
district_data
exit
sites
continue
   LowNpidNotificationMailer.low_npid(site).deliver_later
exit
site["location_id"]
site[:location_id]
site
exit
 LowNpidNotificationMailer.low_npid(site).deliver_later
site
exit
LastSeenMailer.last_seen_more_than_3_days(site).deliver_later
site["last_seen"].to_datetime.strftime('%d %b, %Y %H:%M:%S')
site["last_seen"]
exit
continue
 LastSeenMailer.last_seen_more_than_3_days(site).deliver_later
exit
site
exit
 LastSeenMailer.last_seen_more_than_3_days(site).deliver_later
exit
continue
exit
exti
exit
  LastSyncedMailer.last_synced_more_than_3_days(site).deliver_now
  LastSyncedMailer.last_synced_more_than_3_days(site).deliver_later
exit
site["days_remaining"]
site[:days_remaining]
site[:site_name]
 site[:avg_consumption_rate_per_day] || 0
exit
MailingList.joins(:roles).where('roles.role = ?', 'Admin').pluck(:email)
 MailingList.joins(:roles).where('roles.role = ?', 'Admin').pluck(:email) 
 @mailing_list.blank? 
   @mailing_list = MailingList.joins(:mailer_locations).where(
            'mailer_locations.location_id = ?', 
            site_details["location_id"]).pluck(:email)
 @site_details["location_id"]
 @site_details["location_id']
 @site_details[:location_id]
 @site_details[:loaction_id]
 @site_details = site_details
site_details = site
site
   LastSyncedMailer.last_synced_more_than_3_days(site)
exit
site["location_id"]
site[:location_id]
site
exit
   LastSyncedMailer.last_synced_more_than_3_days(site)
exit
continue
 site['days_since_last_activity'].to_i > 3
  LastSyncedMailer.last_synced_more_than_3_days(site)
continue
exit
smtp_settings[:address]
smtp_settings[:port]
